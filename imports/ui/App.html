<body>
    {{> mainContainer}}
</body>


<template name="mainContainer">
    {{#if notReady}} 
    Kobolds gathering...
    {{else}}
        <div class="container">
            <header>
                <h1>{{userName}}'s town</h1>
            </header>
            Resources
            <ul>
                {{#each resource in resources}}
                    {{> showResource resource}}
                {{/each}}
            </ul>


            Kobolds
            <ul>
                {{#each kobold in kobolds}}
                    {{> showKobold kobold}}
                {{/each}}
            </ul>
        </div>
    {{/if}}
</template>

<template name="showKobold">
    <div class="clickable js-click-name" style="color: {{color}};">
        {{name}}
    </div>

    {{#if showDetails}}
        <div class="details" style="border-color: {{color}};">
            Color: {{color}}
            <br>
            Physical: {{physical}}
            <br>
            Mental: {{mental}}
            <br>
            Social: {{social}}
            <br>

            <select id="breedSelect">
                <option selected>Breed With</option>
                {{#each otherKobold in kobolds}}
                    {{#unless isCurrentKobold otherKobold._id}}
                        <option style="color: {{otherKoboldColor otherKobold._id}};" value="{{otherKobold._id}}">{{otherKobold.name}}</option>
                    {{/unless}}
                {{/each}}
            </select>
            <button class="js-breed">Confirm</button>
        </div>
    {{/if}}
    
    <br>
</template>

<template name="showResource">
    <div class="clickable js-click-name" style="color: {{color}};">
        {{name}}
    </div>

    {{#if visible}}
        {{#if showDetails}}
            <div class="details" style="border-color: {{color}};">
                Stockpile: {{stockpile}}
            </div>
        {{/if}}
    {{/if}}

    <br>
</template>

<template name="showJobs">
    <div class="clickable js-click-name" style="color: {{color}};">
        {{name}}
    </div>
</template>